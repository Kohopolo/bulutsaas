{% extends "tenant/base.html" %}
{% load static %}

{% block title %}Yeni Yedekleme{% endblock %}

{% block content %}
<div class="content-body">
    <div class="groupbox">
        <div class="groupbox-header">
            <i class="fas fa-database"></i> Yeni Yedekleme Oluştur
            <div style="float: right;">
                <a href="{% url 'backup:backup_list' %}" class="vb-button">
                    <i class="fas fa-arrow-left"></i> Geri
                </a>
            </div>
        </div>
        <div class="groupbox-body">
            <form method="post" id="backupForm">
                {% csrf_token %}
                
                <div class="form-groupbox">
                    <div class="groupbox-header">Yedekleme Ayarları</div>
                    <div class="groupbox-body">
                        {% if can_backup %}
                        <input type="hidden" name="schema_name" value="{{ current_schema }}">

                        <div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 3px; padding: 15px; margin-top: 20px;">
                            <strong><i class="fas fa-info-circle"></i> Bilgi:</strong>
                            <ul style="margin: 10px 0 0 20px; padding: 0;">
                                <li>Yedekleme işlemi biraz zaman alabilir.</li>
                                <li>Dosya otomatik olarak sıkıştırılacaktır (.sql.gz formatında).</li>
                            </ul>
                        </div>
                        {% else %}
                        <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 3px; padding: 15px;">
                            <strong><i class="fas fa-exclamation-triangle"></i> Uyarı:</strong>
                            <p style="margin: 10px 0 0 0;">Public schema'dan yedekleme oluşturulamaz.</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div style="margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px;">
                    <a href="{% url 'backup:backup_list' %}" class="vb-button">
                        <i class="fas fa-times"></i> İptal
                    </a>
                    <button type="submit" class="vb-button primary">
                        <i class="fas fa-database"></i> Yedekleme Oluştur
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

