{% extends "tenant/base.html" %}
{% load static %}

{% block title %}{% if ticket %}Bilet Düzenle{% else %}Yeni Bilet{% endif %}{% endblock %}

{% block content %}
<div class="content-body">
    <div class="groupbox">
        <div class="groupbox-header">
            <i class="fas fa-{% if ticket %}edit{% else %}plus{% endif %}"></i> 
            {% if ticket %}Bilet Düzenle{% else %}Yeni Bilet{% endif %}
        </div>
        <div class="groupbox-body">
            <form method="post" id="ticketForm">
                {% csrf_token %}
                
                <!-- Form içeriği form_modal.html'den alınacak -->
                {% include 'ferry_tickets/tickets/form_modal.html' %}

                <div style="margin-top: 20px; text-align: right;">
                    <a href="{% if ticket %}{% url 'ferry_tickets:ticket_detail' ticket.pk %}{% else %}{% url 'ferry_tickets:ticket_list' %}{% endif %}" 
                       class="vb-button" style="margin-right: 10px;">
                        <i class="fas fa-times"></i> İptal
                    </a>
                    <button type="submit" class="vb-button primary">
                        <i class="fas fa-save"></i> Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Form yüklendiğinde initTicketForm'u çağır
document.addEventListener('DOMContentLoaded', function() {
    if (typeof initTicketForm === 'function') {
        initTicketForm();
    }
});
</script>
{% endblock %}

