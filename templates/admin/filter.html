{% load i18n %}
<div class="mb-3">
    <details data-filter-title="{{ title }}" open class="border border-gray-300 rounded-vb bg-white shadow-sm">
        <summary class="px-4 py-2.5 bg-gray-50 border-b border-gray-300 cursor-pointer font-semibold text-sm text-vb-navy-500 hover:bg-gray-100 transition-colors flex items-center justify-between">
            <span>{% blocktranslate with filter_title=title %} By {{ filter_title }} {% endblocktranslate %}</span>
            <i class="fas fa-chevron-down text-xs transform transition-transform"></i>
        </summary>
        <div class="p-3">
            <div class="flex flex-wrap gap-2">
                {% for choice in choices %}
                    {% if choice.selected %}
                        <a href="{{ choice.query_string|iriencode }}" class="inline-flex items-center px-3 py-1.5 bg-vb-primary text-white rounded-vb text-sm font-medium hover:bg-blue-600 transition-colors shadow-sm">
                            <i class="fas fa-check-circle mr-1.5 text-xs"></i>
                            {{ choice.display }}
                        </a>
                    {% else %}
                        <a href="{{ choice.query_string|iriencode }}" class="inline-flex items-center px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-vb text-sm font-medium hover:bg-gray-50 hover:border-vb-primary hover:text-vb-primary transition-colors shadow-sm">
                            {{ choice.display }}
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </details>
</div>

<style>
    details[open] summary i {
        transform: rotate(180deg);
    }
</style>
