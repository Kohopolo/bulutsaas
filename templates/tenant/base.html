{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% block title %}BULUT ACENTE{% endblock %} - Yönetim Sistemi</title>
    
    <!-- Standalone Layout CSS -->
    <link rel="stylesheet" href="{% static 'css/standalone-layout.css' %}">
    
    <!-- Tailwind CSS CDN (Modül sayfaları için) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            corePlugins: {
                forms: false,
            },
            theme: {
                extend: {
                    colors: {
                        'vb-navy': {
                            500: '#2C5F8D', // Müşteri detay başlık rengi
                            600: '#1e2935',
                        },
                        'vb-primary': '#0078D4', // Müşteri detay primary
                        'vb-header-bg': '#E8F4F8', // Groupbox header
                        'vb-header-text': '#2C5F8D', // Başlık metin
                        'vb-body-bg': '#FFFFFF', // Body arka plan
                        'vb-groupbox-bg': '#F8F9FA', // Groupbox body
                        'vb-border': '#D4D4D4', // Border rengi
                        'vb-label': '#333333', // Label rengi
                        'vb-value': '#666666', // Value rengi
                        'bulut': {
                            'sidebar': '#1e2935',
                            'sidebar-fg': '#e5e7eb',
                            'sidebar-hover': '#2b3a47',
                            'sidebar-active': '#3498db',
                        },
                    },
                    fontFamily: {
                        'vb': ['Segoe UI', 'Microsoft Sans Serif', 'Arial', 'sans-serif'],
                    },
                    fontSize: {
                        'vb-xs': '11px',
                        'vb-sm': '12px',
                        'vb-base': '12px',
                        'vb-lg': '13pt',
                        'vb-xl': '14pt',
                        'vb-2xl': '18pt',
                    },
                },
            },
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS (Opsiyonel) -->
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Standalone Tarzı Tam Ekran Uygulama -->
    <div class="standalone-app">
        
        <!-- Menu Strip (VB MenuStrip) -->
        {% include 'includes/menu_strip_tenant.html' %}
        
        <!-- Header Panel (VB Form Header) -->
        {% include 'includes/header_panel_tenant.html' %}
        
        <!-- Main Layout (3 Sütunlu) -->
        <div class="main-layout">
            
            <!-- Left Panel (Modül Menüsü) -->
            {% include 'includes/module_sidebar_tenant.html' %}
            
            <!-- Center Panel (Ana İçerik) -->
            <div class="center-panel" id="centerPanel">
                {% if messages %}
                    {% for message in messages %}
                    <div class="alert-message alert-{{ message.tags }}" style="padding: 10px 15px; margin-bottom: 10px; border-radius: 3px; background-color: {% if message.tags == 'error' %}#F44336{% elif message.tags == 'warning' %}#FF9800{% elif message.tags == 'success' %}#4CAF50{% else %}#2196F3{% endif %}; color: white; font-size: 12px; display: flex; align-items: center; gap: 8px;">
                        {% if message.tags == 'error' %}
                        <i class="fas fa-exclamation-circle"></i>
                        {% elif message.tags == 'warning' %}
                        <i class="fas fa-exclamation-triangle"></i>
                        {% elif message.tags == 'success' %}
                        <i class="fas fa-check-circle"></i>
                        {% else %}
                        <i class="fas fa-info-circle"></i>
                        {% endif %}
                        <span>{{ message }}</span>
                    </div>
                    {% endfor %}
                {% endif %}
                {% block content %}{% endblock %}
            </div>
            
            <!-- Right Panel (Kısayollar) -->
            {% include 'includes/shortcuts_panel_tenant.html' %}
            
        </div>
        
        <!-- Footer Panel (VB StatusStrip + Shortcuts) -->
        {% include 'includes/footer_panel_tenant.html' %}
        
                                    </div>

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <!-- Module Loader JS (Tenant versiyonu) -->
    <script src="{% static 'js/module-loader-tenant.js' %}"></script>

    <!-- Modal System JS -->
    <script src="{% static 'js/modal-system.js' %}"></script>

    <!-- Footer Functions JS -->
    <script src="{% static 'js/footer-functions.js' %}"></script>

    <!-- Form Link Interceptor - Doğrudan açılan sayfaları handle et -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Eğer sayfa doğrudan açıldıysa ve form sayfasıysa, center panel'e yükle
        const currentPath = window.location.pathname;
        const isFormPage = currentPath.includes('/edit/') || 
                          currentPath.includes('/create/') || 
                          currentPath.includes('/form/') || 
                          currentPath.includes('/add/');
        
        // Eğer form sayfasıysa ve center panel boşsa veya sadece default içerik varsa
        if (isFormPage && typeof loadUrlToCenterPanel === 'function') {
            const centerPanel = document.getElementById('centerPanel');
            if (centerPanel) {
                // Sayfa zaten yüklendi, sadece scroll'u en üste al
                centerPanel.scrollTop = 0;
            }
        }
    });
    </script>

    <!-- Custom JS (Opsiyonel) -->
    {% block extrajs %}{% endblock %}
</body>
</html>
